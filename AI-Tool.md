# 中度集成型智能助手工具设计书



## 文档信息

文档：MMAssistant（多模型 AI 助手）**详细设计书**

版本：v0.1（初稿）

作者：Bryant（邵炜杰）

目标读者：研发、测试、运维、安全、产品、架构评审

命名：Bryant（暂定）

修订记录：

- 2025-10-07：创建初稿（范围、架构、数据、接口、流程、测试、SLO、成本）

## 1.背景与目标

**问题**：现有通用对话工具难以针对不同任务自动选用最合适的模型/工具，且业务文件检索、表格制图、代码执行等能力分散。
**目标**：构建一个类似 ChatGPT 的对话系统，具备**自动模型路由**、**RAG 检索**、**Python 表格/制图**、**代码沙箱运行**、**合规与成本可控**等能力，用于个人/小团队的日常开发与办公提效。

### **成功标准（Success Criteria）**：

- 输入包含代码/报错 → 自动切 Claude Code/DeepSeek Coder，给出可执行修复方案；
- 输入包含“整理表格/做图/导出” → 触发 Python Worker，生成 XLSX/PNG/PDF 并回传；
- 输入“查我文件中的××参数” → 命中 RAG，答案携带可点击引用；
- 本地/云端安全：敏感文件不出域；成本可观测并受配额约束；
- UI 流畅（P95 首字 ≤ 1.5s、P95 完成 ≤ 10s*，工具任务除外）。

## 2. 范围与不在范围

**在范围**：

- 多模型选择（OpenAI/Anthropic/DeepSeek/可选本地LLM）
- 工具箱：RAG、Python Worker（表格/图表）、代码 Runner、文件上传/下载
- 对话流式、消息/成本审计、权限/空间、基本运维监控

**不在范围（v1）**：

- 大规模多人协作与组织级 SSO，目前仅考虑个人使用，后续可考虑提升至小规模多人团队使用；
- 超大批量异步数据流水线；
- 复杂绘图（CAD/Visio 级别）；
- 端到端企业级 DLP/IRM（v1 做最小合规）。

## 3. 术语

- **RAG**：Retrieval Augmented Generation（检索增强生成）。
- **Router**：模型与工具选择器。
- **Python Worker**：受限沙箱内执行数据处理/绘图脚本的后端服务。
- **Code Runner**：受限容器中执行编译/测试/脚手架的服务。
- **Vector DB**：向量数据库（pgvector/Qdrant）。

## 4.总体架构（High-Level）